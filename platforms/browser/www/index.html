<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
    <title>Kidoju.Mobile</title>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="build/app.bundle.js"></script>
</head>
<body>

<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<!-- Tablet application                                                        -->
<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

<div id="tablet" style="display: none;">
    <!-- TODO -->
</div>

<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<!-- Phone application                                                         -->
<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

<div id="phone">

    <!-- Main layout -->
    <div data-role="layout" data-id="phone-main-layout">
        <header data-role="header">
            <div data-role="navbar" class="km-accent">
                <a id="phone-main-layout-drawer" data-role="button" href="#phone-drawer" data-rel="drawer" class="nav-button" data-align="left" data-icon="settings"></a>
                <a id="phone-main-layout-back" data-role="button" class="nav-button" data-align="left" data-icon="back"></a>
                <!--a id="phone-main-layout-" data-role="button" class="nav-button" data-align="left" data-icon="rewind"></a-->
                <span data-role="view-title"></span>
                <!-- TODO QR Code -->
                <!--a id="phone-main-layout-" data-role="button" class="nav-button" data-align="left" data-icon="fastforward"></a-->
                <a id="phone-main-layout-search" data-role="button" class="nav-button" data-align="right" data-icon="search"></a>
                <a id="phone-main-layout-sync" data-role="button" class="nav-button" data-align="right" data-icon="refresh"></a>
                <ul id="phone-main-layout-selection" data-role="buttongroup" data-index="0">
                    <li>Recent</li>
                    <li>Popular</li>
                    <li>Best</li>
                </ul>
            </div>
        </header>
    </div>

    <!-- Drawer -->
    <div id="phone-drawer" data-role="drawer" data-position="left" data-swipe-to-open="false">
        <div data-role="navbar">Kidoju Logo</div>
        <ul data-role="listview">
            <li><a href="#phone-categories">Explore</a></li>
            <li><a href="#phone-favourites">Favourites</a></li>
            <li><a href="#phone-scores">Scores</a></li>
            <li><a href="#phone-settings">Settings</a></li>
        </ul>
    </div>

    <!-- Categories -->
    <div id="phone-categories" data-role="view" data-layout="phone-main-layout" data-title="Explore" data-show="app.onCategoriesShow">
        <!-- Display search button -->
        <ul data-role="listview" data-source="app.viewModel.categories" data-pull-to-refresh="true" data-append-on-refresh="true" data-template="phone-categories-template">
        </ul>
        <script type="text/x-kendo-template" id="phone-categories-template">
            <a href="\#phone-summaries">#: name #</a>
        </script>
    </div>

    <!-- Summaries -->
    <div id="phone-summaries" data-role="view" data-layout="phone-main-layout" data-title="Explore" data-show="app.onSummariesShow">
        <ul data-role="listview" data-source="app.viewModel.summaries" data-pull-to-refresh="true" data-append-on-refresh="true" data-template="phone-summaries-template">
        </ul>
        <script type="text/x-kendo-template" id="phone-summaries-template">
            <a href="\#phone-player">#: title #</a>
        </script>
    </div>

    <!-- Favourites view -->
    <div id="phone-favourites" data-role="view" data-layout="phone-main-layout" data-title="Favourites" data-show="app.onFavouritesShow">
        <ul data-role="listview" data-source="app.viewModel.favourites" data-pull-to-refresh="true" data-append-on-refresh="true" data-template="phone-favourites-template">
        </ul>
        <script type="text/x-kendo-template" id="phone-favourites-template">
            <a href="\#phone-player">#: title #</a>
        </script>
    </div>

    <!-- Scores view -->
    <div id="phone-scores" data-role="view" data-layout="phone-main-layout" data-title="Scores" data-show="app.onScoresShow">
        <ul data-role="listview" data-source="app.viewModel.scores" data-pull-to-refresh="true" data-append-on-refresh="true" data-template="phone-scores-template">
        </ul>
        <script type="text/x-kendo-template" id="phone-scores-template">
            <a href="\#phone-player">#: title # - #: score #</a>
        </script>
    </div>

    <!-- Settings view -->
    <div id="phone-settings" data-role="view" data-layout="phone-main-layout" data-title="Settings" data-use-native-scrolling="true" data-show="app.onSettingsShow">
        <!-- see http://docs.telerik.com/kendo-ui/controls/hybrid/styles/forms -->
        <form action="./index.html">
            <ul data-role="listview" data-style="inset">
                <li>
                    <label>
                        <span>User</span>
                        <input type="text" value="Text" />
                        <!-- Show login button -->
                    </label>
                </li>
                <li>
                    <label>
                        <span>Version</span>
                        <input type="text" value="Text" />
                        <!-- Show upgrade sign if it does not match server -->
                    </label>
                </li>
                <li>
                    <label>
                        <span>Language</span>
                        <input type="text" value="Text" />
                    </label>
                </li>
                <li>
                    <label>
                        <span>Theme</span>
                        <input type="text" value="Text" />
                    </label>
                </li>
            </ul>
        </form>
    </div>

    <!-- Player view (ATTENTION: this one does not use the layout) -->
    <div id="phone-player" data-role="view" data-layout="phone-main-layout" data-title="Page 1 of 6" data-show="app.onPlayerShow">
        <!-- Add player + instructions/explanation -->
        Player
        Instructions
    </div>

</div>

<script>
    (function(){

        var app = window.app = window.app || {};
        app.viewModel = kendo.observable({
            categories: [
                { name: 'Mathematics' },
                { name: 'Physics' },
                { name: 'English' }
            ],
            summaries: [
                { title: 'Test of Mathematics' },
                { title: 'Test of Physics' },
                { title: 'Test of English' },
                { title: 'Test of Geography' },
                { title: 'Test of History' }
            ],
            favourites: [
                { title: 'Test of Mathematics' },
                { title: 'Test of Physics' },
                { title: 'Test of English' },
                { title: 'Test of Geography' },
                { title: 'Test of History' }
            ],
            scores: [
                { title: 'Test of Mathematics', score: 10 },
                { title: 'Test of Physics', score: 20 },
                { title: 'Test of English', score: 30 },
                { title: 'Test of Geography', score: 40 },
                { title: 'Test of History', score: 50 }
            ],
            languages: [
                { value: 'en', text: 'English' },
                { value: 'fr', text: 'French' }
            ],
            themes: [
                'flat',
                'nova'
            ],
            settings: {
                picture: '',
                userName: 'Jacques L. Chereau',
                version: 'v0.0.10',
                language: 'en'
            }
        });

        app._setNavBar = function (e) {
            var showDrawerButton = false;
            var showBackButton = false;
            var showSearchButton = false;
            var showSyncButton = false;
            var showSelectionButtons = false;
            switch (e.view.id) {
                case '/':
                case '#phone-categories':
                    showDrawerButton = true;
                    showBackButton = true;  // this depends whether category has parent id or not
                    showSearchButton = true;
                    break;
                case '#phone-summaries':
                    showDrawerButton = true;
                    showBackButton = true;
                    showSearchButton = true;
                    showSelectionButtons = true;
                    break;
                case '#phone-favourites':
                    showDrawerButton = true;
                    showSyncButton = true;
                    break;
                case '#phone-scores':
                    showDrawerButton = true;
                    showSyncButton = true;
                    break;
                case '#phone-settings':
                    showDrawerButton = true;
                    showSyncButton = true;
                    break;
                case '#phone-player':
                    showDrawerButton = true;
                    // Add playbar buttons + page numbers
                    break;
            }
            $('#phone-main-layout-drawer').css({ display: showDrawerButton ? 'inline-block': 'none' });
            $('#phone-main-layout-back').css({ display: showBackButton ? 'inline-block': 'none' });
            $('#phone-main-layout-search').css({ display: showSearchButton ? 'inline-block': 'none' });
            $('#phone-main-layout-sync').css({ display: showSyncButton ? 'inline-block': 'none' });
            $('#phone-main-layout-selection').css({ display: showSelectionButtons ? 'table' : 'none' });
        };

        app.onCategoriesShow = function (e) {
            app._setNavBar(e);
        };

        app.onSummariesShow = function (e) {
            app._setNavBar(e);
        };

        app.onFavouritesShow = function (e) {
            app._setNavBar(e);
        };

        app.onSettingsShow = function (e) {
            app._setNavBar(e);
        };

        app.onPlayerShow = function (e) {
            app._setNavBar(e);
        };

        app.kendoApp = new kendo.mobile.Application($('#phone'), { platform: 'android-dark', skin: 'nova' });



    }());
</script>

</body>
</html>